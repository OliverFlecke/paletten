(this["webpackJsonptemperature-website"]=this["webpackJsonptemperature-website"]||[]).push([[0],{169:function(e,t){},170:function(e,t){},178:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),c=n(65),u=n.n(c),o=(n(77),n(71)),l=n(16),s=n(34),f=n(2),d=n(66),m=n(3);function b(){var e=Object(f.a)(["\n\tpadding: 0;\n\tmargin: 0;\n\tmargin-bottom: 6px;\n"]);return b=function(){return e},e}function p(){var e=Object(f.a)(["\n\tdisplay: flex;\n\tjustify-content: space-between;\n  width: 100%;\n"]);return p=function(){return e},e}function h(){var e=Object(f.a)(["\n  width: 100%;\n  max-width: 200px;\n  box-sizing: border-box;\n  padding: 0 10px;\n"]);return h=function(){return e},e}!function(e){e[e.On=0]="On",e[e.Off=1]="Off"}(a||(a={}));var v=function(e){var t=e.state,n=e.name;return i.a.createElement(g,null,i.a.createElement(j,null,n),i.a.createElement(O,null,"Temperatur: ",i.a.createElement("span",null,t.temperature," \xb0C")),i.a.createElement(O,null,"Fugtighed:",i.a.createElement("span",null,t.humidity," %")))},g=m.b.div(h()),O=m.b.div(p()),j=m.b.h3(b()),E=n(70);function y(){var e=Object(f.a)(["\n\tbackground-color: ",";\n\tcolor: white;\n\tpadding: 10px;\n\tmargin: 6px;\n\tfont-size: 1.2em;\n\tborder-radius: 6px;\n"]);return y=function(){return e},e}var w=m.b.button(y(),(function(e){var t;return null!==(t=e.color)&&void 0!==t?t:"blue"})),x=function(e){var t=e.shelly,n=Object(r.useCallback)((function(){N(t)}),[t]);return i.a.createElement(w,{onClick:n,color:H(t.state)},i.a.createElement(Z,null,i.a.createElement(E.a,{size:"20px"})),t.name)};function k(){var e=Object(f.a)(["\n\tdisplay: inline-flex;\n\theight: 100%;\n\tjustify-content: center;\n\tflex-direction: column;\n\tpadding: 0 6px;\n"]);return k=function(){return e},e}function C(){var e=Object(f.a)(["\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-direction: column;\n\tvertical-align: middle;\n"]);return C=function(){return e},e}function S(){var e=Object(f.a)(["\n\tdisplay: flex;\n\tjustify-content: space-between;\n"]);return S=function(){return e},e}function z(){var e=Object(f.a)(["\n  body {\n    padding: 0;\n    margin: 0;\n    height: 100%;\n\t\twidth: 100%;\n\t\ttext-align: center;\n  }\n"]);return z=function(){return e},e}var T=Object(m.a)(z()),W=[{id:"C4402D",name:"Spisebord"},{id:"C431FB",name:"Sofa"},{id:"10DB9C",name:"Sovev\xe6relse"}],B=Object(d.connect)("wss://palletten.northeurope.azurecontainer.io:8083");function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"toggle";B.publish("shellies/shelly1-".concat(e.id,"/relay/0/command"),t)}function D(e){var t=e.match(Object(s.a)(/\/([0-9A-Z_a-z]+)$/,{place:1}));return(null===t||void 0===t?void 0:t.groups)?null===t||void 0===t?void 0:t.groups.place:void 0}function H(e){switch(e){case a.Off:return"red";case a.On:return"green";default:return"grey"}}function A(){var e=Object(r.useState)(),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(),c=Object(l.a)(i,2);return[{temperature:n,humidity:c[0]},{setTemperature:a,setHumidity:c[1]}]}var F=function(){var e=A(),t=Object(l.a)(e,2),n=t[0],c=t[1],u=A(),f=Object(l.a)(u,2),d=f[0],m=f[1],b=Object(r.useState)(W),p=Object(l.a)(b,2),h=p[0],g=p[1],O=h.map((function(e){return e.id}));Object(r.useEffect)((function(){B.on("connect",(function(){console.log("connected"),O.forEach((function(e){B.subscribe("shellies/shelly1-".concat(e,"/relay/0"),(function(e){}))})),["inside","outside"].forEach((function(e){B.subscribe("temperature/".concat(e),(function(e){})),B.subscribe("humidity/".concat(e),(function(e){}))}))}))}),[]),Object(r.useEffect)((function(){B.on("message",(function(e,t){if(e.startsWith("temperature/"))switch(D(e)){case"inside":null===c||void 0===c||c.setTemperature(Number(t));break;case"outside":null===m||void 0===m||m.setTemperature(Number(t))}else if(e.startsWith("humidity/"))switch(D(e)){case"inside":c.setHumidity(Number(t));break;case"outside":m.setHumidity(Number(t))}if(e.startsWith("shellies")){var n=e.match(Object(s.a)(/\x2D([0-9A-Z_a-z]*)/,{id:1}));if(null===n||void 0===n?void 0:n.groups){var r="on"===t.toString()?a.On:a.Off,i=null===n||void 0===n?void 0:n.groups.id;g((function(e){return e.map((function(e){return Object(o.a)({},e,{state:e.id===i?r:e.state})}))}))}}}))}),[m,c]);var j=Object(r.useCallback)((function(){h.forEach((function(e){return N(e,"on")}))}),[h]),E=Object(r.useCallback)((function(){h.forEach((function(e){return N(e,"off")}))}),[h]);return i.a.createElement("div",null,i.a.createElement(T,null),i.a.createElement("h1",null,"Palletten"),i.a.createElement(I,null,i.a.createElement(v,{name:"Inde",state:n}),i.a.createElement(v,{name:"Ude",state:d})),i.a.createElement(J,null,h.map((function(e){return i.a.createElement(x,{key:e.id,shelly:e})}))),i.a.createElement("hr",null),i.a.createElement(w,{onClick:j},"T\xe6nd alt"),i.a.createElement(w,{onClick:E},"Sluk alt"))},I=m.b.div(S()),J=m.b.div(C()),Z=m.b.span(k());Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,t,n){e.exports=n(178)},77:function(e,t,n){},80:function(e,t){},82:function(e,t){}},[[72,1,2]]]);
//# sourceMappingURL=main.1dbcf38b.chunk.js.map