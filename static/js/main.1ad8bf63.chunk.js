(this["webpackJsonptemperature-website"]=this["webpackJsonptemperature-website"]||[]).push([[0],{169:function(e,t){},170:function(e,t){},178:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(65),c=n.n(i),u=(n(77),n(71)),o=n(12),l=n(34),s=n(2),f=n(66),m=n(3);function d(){var e=Object(s.a)(["\n\tbackground-color: ",";\n\tcolor: white;\n\tpadding: 10px;\n\tmargin: 6px;\n\tfont-size: 1.2em;\n\tborder-radius: 6px;\n"]);return d=function(){return e},e}var b,p=m.b.button(d(),(function(e){var t;return null!==(t=e.color)&&void 0!==t?t:"blue"}));function v(){var e=Object(s.a)(["\n\tpadding: 0;\n\tmargin: 0;\n\tmargin-bottom: 6px;\n"]);return v=function(){return e},e}function h(){var e=Object(s.a)(["\n\tdisplay: flex;\n\tjustify-content: space-between;\n  width: 100%;\n"]);return h=function(){return e},e}function g(){var e=Object(s.a)(["\n  width: 100%;\n  max-width: 200px;\n  box-sizing: border-box;\n  padding: 0 10px;\n"]);return g=function(){return e},e}!function(e){e[e.On=0]="On",e[e.Off=1]="Off"}(b||(b={}));var O=function(e){var t=e.state,n=e.name;return a.a.createElement(j,null,a.a.createElement(y,null,n),a.a.createElement(E,null,"Temperatur: ",a.a.createElement("span",null,t.temperature," \xb0C")),a.a.createElement(E,null,"Fugtighed:",a.a.createElement("span",null,t.humidity," %")))},j=m.b.div(g()),E=m.b.div(h()),y=m.b.h3(v()),x=n(70),w=function(e){var t=e.shelly,n=Object(r.useCallback)((function(){A(t)}),[t]);return a.a.createElement(p,{onClick:n,color:H(t.state)},a.a.createElement($,null,a.a.createElement(x.a,{size:"20px"})),t.name)};function k(){var e=Object(s.a)(["\n\twidth: 90%;\n\tbox-sizing: border-box;\n"]);return k=function(){return e},e}function C(){var e=Object(s.a)(["\n\tdisplay: inline-flex;\n\theight: 100%;\n\tjustify-content: center;\n\tflex-direction: column;\n\tpadding: 0 6px;\n"]);return C=function(){return e},e}function S(){var e=Object(s.a)(["\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-direction: column;\n\tvertical-align: middle;\n"]);return S=function(){return e},e}function z(){var e=Object(s.a)(["\n\tdisplay: flex;\n\tjustify-content: space-between;\n"]);return z=function(){return e},e}function N(){var e=Object(s.a)(["\n  body {\n    padding: 0;\n    margin: 0;\n    height: 100%;\n\t\twidth: 100%;\n\t\ttext-align: center;\n  }\n"]);return N=function(){return e},e}var T=Object(m.a)(N()),W=[{id:"C4402D",name:"Spisebord"},{id:"C431FB",name:"Sofa"},{id:"10DB9C",name:"Sovev\xe6relse"}],B=Object(f.connect)("wss://palletten.northeurope.azurecontainer.io:8083");function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"toggle";B.publish("shellies/shelly1-".concat(e.id,"/relay/0/command"),t)}function D(e){var t=e.match(Object(l.a)(/\/([0-9A-Z_a-z]+)$/,{place:1}));return(null===t||void 0===t?void 0:t.groups)?null===t||void 0===t?void 0:t.groups.place:void 0}function H(e){switch(e){case b.Off:return"red";case b.On:return"green";default:return"grey"}}function F(){var e=Object(r.useState)(),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(),c=Object(o.a)(i,2);return[{temperature:n,humidity:c[0]},{setTemperature:a,setHumidity:c[1]}]}var I=function(){var e=F(),t=Object(o.a)(e,2),n=t[0],i=t[1],c=F(),s=Object(o.a)(c,2),f=s[0],m=s[1],d=Object(r.useState)(W),v=Object(o.a)(d,2),h=v[0],g=v[1],j=h.map((function(e){return e.id}));Object(r.useEffect)((function(){B.on("connect",(function(){console.log("connected"),j.forEach((function(e){B.subscribe("shellies/shelly1-".concat(e,"/relay/0"),(function(e){}))})),["inside","outside"].forEach((function(e){B.subscribe("temperature/".concat(e),(function(e){})),B.subscribe("humidity/".concat(e),(function(e){}))}))}))}),[]),Object(r.useEffect)((function(){B.on("message",(function(e,t){if(e.startsWith("temperature/"))switch(D(e)){case"inside":null===i||void 0===i||i.setTemperature(Number(t));break;case"outside":null===m||void 0===m||m.setTemperature(Number(t))}else if(e.startsWith("humidity/"))switch(D(e)){case"inside":i.setHumidity(Number(t));break;case"outside":m.setHumidity(Number(t))}if(e.startsWith("shellies")){var n=e.match(Object(l.a)(/\x2D([0-9A-Z_a-z]*)/,{id:1}));if(null===n||void 0===n?void 0:n.groups){var r="on"===t.toString()?b.On:b.Off,a=null===n||void 0===n?void 0:n.groups.id;g((function(e){return e.map((function(e){return Object(u.a)({},e,{state:e.id===a?r:e.state})}))}))}}}))}),[m,i]);var E=Object(r.useCallback)((function(){h.forEach((function(e){return A(e,"on")}))}),[h]),y=Object(r.useCallback)((function(){h.forEach((function(e){return A(e,"off")}))}),[h]);return a.a.createElement("div",null,a.a.createElement(T,null),a.a.createElement("h1",null,"Palletten"),a.a.createElement(J,null,a.a.createElement(O,{name:"Inde",state:n}),a.a.createElement(O,{name:"Ude",state:f})),a.a.createElement(Z,null,h.map((function(e){return a.a.createElement(w,{key:e.id,shelly:e})}))),a.a.createElement("hr",null),a.a.createElement(p,{onClick:E},"T\xe6nd alt"),a.a.createElement(p,{onClick:y},"Sluk alt"),a.a.createElement("hr",null),a.a.createElement(_,null))},J=m.b.div(z()),Z=m.b.div(S()),$=m.b.span(C()),_=function(){var e=Object(r.useState)(0),t=Object(o.a)(e,2),n=t[0],i=t[1],c=Object(r.useCallback)((function(e){var t=e.currentTarget.valueAsNumber;i(t),B.publish("temperature/set",t.toString(),{retain:!0})}),[i]);return Object(r.useEffect)((function(){B.subscribe("temperature/set"),B.on("message",(function(e,t){if("temperature/set"===e){var n=Number(t.toString());i(n),B.unsubscribe("temperature/set")}}))}),[i]),a.a.createElement("div",null,a.a.createElement(M,{type:"range",min:"0",max:"25",value:n,onChange:c}),a.a.createElement("div",null,"\xd8nskede temperature: ",n," \xb0C"))},M=m.b.input(k());Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,t,n){e.exports=n(178)},77:function(e,t,n){},80:function(e,t){},82:function(e,t){}},[[72,1,2]]]);
//# sourceMappingURL=main.1ad8bf63.chunk.js.map