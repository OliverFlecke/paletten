(this["webpackJsonptemperature-website"]=this["webpackJsonptemperature-website"]||[]).push([[0],{100:function(e,t){},124:function(e,t){},125:function(e,t){},127:function(e,t){},129:function(e,t){},138:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n.n(c),s=n(31),i=(n(74),n(33)),l=n(32),u=n(8),o=n.n(u),d=n(20),f=n(6),b=n(66),m=function(e){var t=e.color,n=e.children,c=e.className,a=e.onClick;return Object(r.jsx)("button",{onClick:a,className:"text-white p-2 m-2 text-xl rounded ".concat(h(null!==t&&void 0!==t?t:"blue")," ").concat(c),children:n})};function h(e){switch(e){case"blue":return"bg-blue-900";case"red":return"bg-red-900";case"green":return"bg-green-900";default:return"bg-gray-700"}}var j,p=function(e){var t=e.client,n=Object(c.useState)(0),a=Object(f.a)(n,2),s=a[0],i=a[1],l=Object(c.useCallback)((function(e){var n=e.currentTarget.valueAsNumber;i(n),t.publish("temperature/set",n.toString(),{retain:!0})}),[t,i]),u=Object(c.useState)(!1),o=Object(f.a)(u,2),d=o[0],b=o[1],m=Object(c.useCallback)((function(e){var n=e.currentTarget.checked;b(n),t.publish("temperature/auto",n.toString(),{retain:!0})}),[t,b]);return Object(c.useEffect)((function(){t.on("message",(function(e,t){"temperature/set"===e?i(Number(t.toString())):"temperature/auto"===e&&b("true"===t.toString())})),t.subscribe("temperature/set"),t.subscribe("temperature/auto")}),[t,i]),Object(r.jsxs)("div",{className:"w-full",children:[Object(r.jsxs)("div",{className:"space-x-2 h-full",children:[Object(r.jsx)("label",{htmlFor:"temperature-control",className:"h-full align-middle text-xl",children:"Automatisk temperaturkontrol?"}),Object(r.jsx)("input",{id:"temperature-control",type:"checkbox",onChange:m,checked:d,className:"w-6 h-6 align-middle"})]}),Object(r.jsxs)("div",{hidden:!d,className:"pt-4",children:[Object(r.jsx)("input",{id:"temperature-range",className:"w-11/12 bg-transparent slider-progress",style:{"--min":0,"--max":25,"--value":s},type:"range",min:"0",max:"25",value:s,onChange:l}),Object(r.jsxs)("label",{htmlFor:"temperature-range",children:["\xd8nskede temperature: ",s," \xb0C"]})]})]})},x=n(67);!function(e){e[e.On=0]="On",e[e.Off=1]="Off"}(j||(j={}));var O=function e(t,n,r){var c=this;Object(x.a)(this,e),this.client=void 0,this.id=void 0,this.name=void 0,this.state=void 0,this.toggle=function(){return c.client.publish(c.commandPath(),"toggle")},this.setState=function(e){return c.client.publish(c.commandPath(),e)},this.commandPath=function(){return"shellies/shelly1-".concat(c.id,"/relay/0/command")},this.id=t,this.name=n,this.client=r},v=function(e){var t=e.state,n=e.name;return Object(r.jsxs)("div",{className:"w-full max-w-xs",children:[Object(r.jsx)("h2",{className:"text-xl",children:n}),Object(r.jsxs)("div",{className:"flex justify-between w-full",children:["Temperatur: ",Object(r.jsxs)("span",{children:[t.temperature," \xb0C"]})]}),Object(r.jsxs)("div",{className:"flex justify-between w-full",children:["Fugtighed:",Object(r.jsxs)("span",{children:[t.humidity," %"]})]})]})},g=n(68),w=function(e){var t=e.shelly;return Object(r.jsxs)(m,{className:"space-x-4",onClick:t.toggle,color:W(t.state),children:[Object(r.jsx)("span",{className:"inline-flex flex-col h-full justify-center align-middle",children:Object(r.jsx)(g.a,{size:"20px"})}),Object(r.jsxs)("span",{children:[t.name," - ",t.state===j.On?"T\xe6ndt":"Slukket"]})]})},y=n(9),k=n.n(y),N="wss://paletten.oliverflecke.me:9001",S=[{id:"C4402D",name:"Spisebord"},{id:"C431FB",name:"Sofa"},{id:"10DB9C",name:"Sovev\xe6relse"}],C=[k.a.rose,k.a.indigo,k.a.teal,k.a.lime,k.a.purple,k.a.cyan,k.a.red,k.a.amber],E={qos:1};var T=function(){var e=Object(c.useState)(),t=Object(f.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.connectAsync)(N,void 0,!1);case 3:t=e.sent,a(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0),a(null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),void 0===n?Object(r.jsx)("h2",{className:"text-black dark:text-white w-full text-center text-xl",children:"Connecting..."}):null===n?Object(r.jsx)("h2",{className:"text-black dark:text-white w-full text-center text-xl",children:"Failed to connect. Please contact website developer"}):Object(r.jsx)(A,{client:n})},A=function(e){var t=e.client,n=B(),a=Object(f.a)(n,2),s=a[0],u=a[1],b=B(),h=Object(f.a)(b,2),x=h[0],g=h[1],y=Object(c.useState)((function(){return S.map((function(e){return new O(e.id,e.name,t)}))})),k=Object(f.a)(y,2),N=k[0],E=k[1];Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F(t,N.map((function(e){return e.id})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.on("message",(function(e,t){if(e.startsWith("temperature/"))switch(P(e)){case"inside":null===u||void 0===u||u.setTemperature(Number(t));break;case"outside":null===g||void 0===g||g.setTemperature(Number(t))}else if(e.startsWith("humidity/"))switch(P(e)){case"inside":u.setHumidity(Number(t));break;case"outside":g.setHumidity(Number(t))}if(e.startsWith("shellies")){var n=e.match(Object(l.a)(/\x2D([0-9A-Z_a-z]*)/,{id:1}));if(null===n||void 0===n?void 0:n.groups){var r="on"===t.toString()?j.On:j.Off,c=null===n||void 0===n?void 0:n.groups.id;E((function(e){return e.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{state:e.id===c?r:e.state})}))}))}}})),function(t){e.apply(this,arguments)}(t)}),[t]);var T=Object(c.useCallback)((function(){return N.forEach((function(e){return e.setState("on")}))}),[N]),A=Object(c.useCallback)((function(){return N.forEach((function(e){return e.setState("off")}))}),[N]);return Object(r.jsxs)("div",{className:"flex flex-col justify-center items-center text-center mx-4 text-gray-700 dark:text-gray-300",children:[Object(r.jsx)("h1",{className:"text-4xl pt-2",children:"Paletten".split("").map((function(e,t){return Object(r.jsx)("span",{style:{color:C[t][500]},children:e},t)}))}),Object(r.jsxs)("div",{className:"flex justify-between space-x-6 pb-4 max-w-lg w-full",children:[Object(r.jsx)(v,{name:"Inde",state:s}),Object(r.jsx)(v,{name:"Ude",state:x})]}),Object(r.jsx)("div",{className:"w-full flex flex-col justify-center align-middle",children:N.map((function(e){return Object(r.jsx)(w,{shelly:e},e.id)}))}),Object(r.jsx)("hr",{className:"w-full my-4"}),Object(r.jsxs)("div",{className:"w-full flex flex-row",children:[Object(r.jsx)(m,{onClick:T,className:"flex-grow",children:"T\xe6nd alt"}),Object(r.jsx)(m,{onClick:A,className:"flex-grow",children:"Sluk alt"})]}),Object(r.jsx)("hr",{className:"w-full my-4"}),Object(r.jsx)(p,{client:t})]})};function F(e,t){t.forEach(function(){var t=Object(d.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.subscribe("shellies/shelly1-".concat(n,"/relay/0"),E);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),["inside","outside"].forEach(function(){var t=Object(d.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.subscribe("temperature/".concat(n),E);case 2:return t.next=4,e.subscribe("humidity/".concat(n),E);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}function P(e){var t=e.match(Object(l.a)(/\/([0-9A-Z_a-z]+)$/,{place:1}));return(null===t||void 0===t?void 0:t.groups)?null===t||void 0===t?void 0:t.groups.place:void 0}function W(e){switch(e){case j.Off:return"red";case j.On:return"green";default:return"grey"}}function B(){var e=Object(c.useState)(),t=Object(f.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(),s=Object(f.a)(a,2);return[{temperature:n,humidity:s[0]},{setTemperature:r,setHumidity:s[1]}]}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=document.getElementById("root"),D=Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(T,{})});(null===z||void 0===z?void 0:z.hasChildNodes())?Object(s.hydrate)(D,z):Object(s.render)(D,z),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},74:function(e,t,n){},80:function(e,t){},82:function(e,t){},98:function(e,t){}},[[138,1,2]]]);
//# sourceMappingURL=main.81e800d2.chunk.js.map