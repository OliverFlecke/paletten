(this["webpackJsonptemperature-website"]=this["webpackJsonptemperature-website"]||[]).push([[0],{113:function(e){e.exports=JSON.parse('{"a":"1.3.0"}')},130:function(e,t,n){},136:function(e,t){},138:function(e,t){},154:function(e,t){},156:function(e,t){},180:function(e,t){},181:function(e,t){},183:function(e,t){},185:function(e,t){},245:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(2),a=n.n(s),r=n(67),i=(n(130),n(6)),l=n(68),u=n(16),o=n.n(u),j=n(22),b=n(12),d=n(115),m=n(17),h=n.n(m),f=[h.a.rose,h.a.indigo,h.a.teal,h.a.lime,h.a.purple,h.a.cyan,h.a.red,h.a.amber],O=function(){return Object(c.jsx)("h1",{className:"text-4xl pt-2",children:"Paletten".split("").map((function(e,t){return Object(c.jsx)("span",{style:{color:f[t][500]},children:e},t)}))})},x=function(e){var t=e.client,n=Object(s.useState)(0),a=Object(b.a)(n,2),r=a[0],i=a[1],l=Object(s.useCallback)((function(e){var n=e.currentTarget.valueAsNumber;i(n),t.publish("temperature/set",n.toString(),{retain:!0})}),[t,i]),u=Object(s.useState)(!1),o=Object(b.a)(u,2),j=o[0],d=o[1],m=Object(s.useCallback)((function(e){var n=e.currentTarget.checked;d(n),t.publish("temperature/auto",n.toString(),{retain:!0})}),[t,d]);return Object(s.useEffect)((function(){t.on("message",(function(e,t){"temperature/set"===e?i(Number(t.toString())):"temperature/auto"===e&&d("true"===t.toString())})),t.subscribe("temperature/set"),t.subscribe("temperature/auto")}),[t,i]),Object(c.jsxs)("div",{className:"w-full",children:[Object(c.jsxs)("div",{className:"space-x-2 h-full",children:[Object(c.jsx)("label",{htmlFor:"temperature-control",className:"h-full align-middle text-xl",children:"Automatisk temperaturkontrol?"}),Object(c.jsx)("input",{id:"temperature-control",type:"checkbox",onChange:m,checked:j,className:"w-6 h-6 align-middle"})]}),Object(c.jsxs)("div",{hidden:!j,className:"pt-4",children:[Object(c.jsx)("input",{id:"temperature-range",className:"w-11/12 bg-transparent slider-progress",style:{"--min":0,"--max":25,"--value":r},type:"range",min:"0",max:"25",value:r,onChange:l}),Object(c.jsxs)("label",{htmlFor:"temperature-range",children:["\xd8nskede temperature: ",r," \xb0C"]})]})]})},p=function(e){var t=e.color,n=e.children,s=e.className,a=e.onClick;return Object(c.jsx)("button",{onClick:a,className:"text-white p-2 m-2 text-xl rounded ".concat(v(null!==t&&void 0!==t?t:"blue")," ").concat(s),children:n})};function v(e){switch(e){case"blue":return"bg-blue-900";case"red":return"bg-red-900";case"green":return"bg-green-900";default:return"bg-gray-700"}}var g,y=function(e){var t=e.shellies,n=Object(s.useCallback)((function(){return t.forEach((function(e){return e.setState("on")}))}),[t]),a=Object(s.useCallback)((function(){return t.forEach((function(e){return e.setState("off")}))}),[t]);return Object(c.jsxs)("div",{className:"w-full flex flex-row",children:[Object(c.jsx)(p,{onClick:n,className:"flex-grow",children:"T\xe6nd alt"}),Object(c.jsx)(p,{onClick:a,className:"flex-grow",children:"Sluk alt"})]})},w=function(e){var t=e.state,n=e.name;return Object(c.jsxs)("div",{className:"w-full max-w-xs",children:[Object(c.jsx)("h2",{className:"text-xl",children:n}),Object(c.jsxs)("div",{className:"flex justify-between w-full",children:["Temperatur: ",Object(c.jsxs)("span",{children:[t.temperature," \xb0C"]})]}),Object(c.jsxs)("div",{className:"flex justify-between w-full",children:["Fugtighed:",Object(c.jsxs)("span",{children:[t.humidity," %"]})]})]})},N=n(44),k=n(116);!function(e){e[e.On=0]="On",e[e.Off=1]="Off"}(g||(g={}));var S=function e(t,n,c){var s=this;Object(k.a)(this,e),this.client=void 0,this.id=void 0,this.name=void 0,this.state=void 0,this.toggle=function(){return s.client.publish(s.commandPath(),"toggle")},this.setState=function(e){return s.client.publish(s.commandPath(),e)},this.commandPath=function(){return"shellies/shelly1-".concat(s.id,"/relay/0/command")},this.id=t,this.name=n,this.client=c},C=function(e){var t=e.shelly;return Object(c.jsxs)(p,{className:"space-x-4",onClick:t.toggle,color:de(t.state),children:[Object(c.jsx)("span",{className:"inline-flex flex-col h-full justify-center align-middle",children:Object(c.jsx)(N.b,{size:"20px"})}),Object(c.jsxs)("span",{children:[t.name," - ",t.state===g.On?"T\xe6ndt":"Slukket"]})]})},z=n(259);function F(e){return function(e){return e.reduce((function(e,t){return e+t}),0)}(e)/e.length}var M=n(69),T=n(255),H=n(257),E=n(253),D=n(252),P=n(261),W=n(258),A=n(254),B=n(256),J=h.a.purple[500],L=function(e){var t=e.data;return Object(c.jsx)(D.a,{children:function(e){var n=e.width,s=30,a=n-s-0,r=150-20-20,i=function(e){return e.time},l=function(e){return e.temp},u=Object(P.a)({range:[s,a],round:!0,domain:t.map(i),padding:.4}),o=Object(W.a)({range:[r,0],round:!0,domain:[Math.min.apply(Math,Object(M.a)(t.map(l)))-2,Math.max.apply(Math,Object(M.a)(t.map(l)))]}),j=function(e,t){return function(n){return e(t(n))}},b=j(u,i),d=j(o,l),m=(new Date).getTimezoneOffset()/60;return Object(c.jsxs)("svg",{width:n,height:150,children:[t.map((function(e,t){var n=r-d(e);return Object(c.jsx)(E.a,{children:Object(c.jsx)(A.a,{x:b(e),y:r-n,height:n,width:u.bandwidth(),fill:h.a.red[700]})},"bar-".concat(t))})),Object(c.jsx)(T.a,{top:r+10,scale:u,tickFormat:function(e){return"".concat(Object(B.a)(e)-m)},stroke:J,tickStroke:J,tickLabelProps:function(){return{fill:J,fontSize:11,textAnchor:"middle"}}}),Object(c.jsx)(H.a,{scale:o,left:s+10,numTicks:5,tickFormat:function(e){return"".concat(e," C")},stroke:J,tickStroke:J,tickLabelProps:function(){return{fill:J,fontSize:11,textAnchor:"end"}}})]})}})},R=function(e){var t=e.client,n=Object(s.useState)(),a=Object(b.a)(n,2),r=a[0],i=a[1],l=Object(s.useState)(),u=Object(b.a)(l,2),o=u[0],j=u[1];return Object(s.useEffect)((function(){t.on("message",(function(e,t){e.startsWith("history")&&("history/inside"===e?i(_(t)):"history/outside"===e&&j(_(t)))})),t.subscribe("history/heater/#"),t.subscribe("history/+")}),[t]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h2",{children:"Temperature inside"}),r&&Object(c.jsx)(L,{data:r}),Object(c.jsx)("h2",{children:"Temperature outside"}),o&&Object(c.jsx)(L,{data:o})]})};function _(e){var t,n=JSON.parse(e.toString()).map((function(e){return Object(i.a)(Object(i.a)({},e),{},{time:Object(z.a)(e.time,"yyyy-MM-dd HH:mm:ss",0)})})),c=(t=function(e){return t=e.time,"".concat(t.getFullYear(),"-").concat(t.getMonth(),"-").concat(t.getDate()," ").concat(t.getHours());var t},n.reduce((function(e,n){var c=t instanceof Function?t(n):n[t];return(e[c]=e[c]||[]).push(n),e}),{}));return Object.keys(c).map((function(e){return{time:Object(z.a)(e,"yyyy-MM-dd HH",0),temp:F(c[e].map((function(e){return e.temp}))),hum:F(c[e].map((function(e){return e.hum})))}})).reverse()}var q=n(8),I=function(e){return Object(c.jsxs)("div",{className:"w-full flex justify-between",children:[Object(c.jsx)(V,{type:e.type}),Object(c.jsxs)("div",{className:"flex flex-col items-end",children:[Object(c.jsxs)("span",{className:"align-middle",children:["Last hour: ",e["1h"]," mm"]}),Object(c.jsxs)("span",{className:"align-middle",children:["Last 3 hours: ",e["3h"]," mm"]})]})]})},V=function(e){var t=e.type;return Object(c.jsx)(c.Fragment,{children:"Rain"===t?Object(c.jsx)(q.l,{size:32,className:"inline self-center"}):Object(c.jsx)(q.m,{size:32,className:"inline self-center"})})},Z=function(e){var t=e.weather;return Object(c.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(t.icon,"@2x.png"),title:t.main,alt:t.description,className:"h-24",loading:"lazy"})},$=n(260),K=function(e){var t=e.sunrise,n=e.sunset;return Object(c.jsxs)("div",{className:"w-full flex justify-evenly",children:[Object(c.jsxs)("span",{children:[Object(c.jsx)(q.n,{size:32,className:"inline"}),Object($.a)(t,"H:mm")]}),Object(c.jsxs)("span",{children:[Object(c.jsx)(q.o,{size:32,className:"inline"}),Object($.a)(n,"H:mm")]})]})},U="0694b207da3718174af5607fbd520b2d",Y="https://api.openweathermap.org/data/2.5";function G(){return(G=Object(j.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Y,"/weather?q=r\xf8rvig,DK&appid=").concat(U,"&units=metric"));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",Object(i.a)(Object(i.a)({},n),{},{dt:new Date(n.dt),sys:Object(i.a)(Object(i.a)({},n.sys),{},{sunrise:new Date(1e3*n.sys.sunrise),sunset:new Date(1e3*n.sys.sunset)})}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=function(e){var t=e.humidity,n=e.pressure,s=e.visibility;return Object(c.jsxs)("details",{children:[Object(c.jsx)("summary",{children:"More"}),Object(c.jsxs)("div",{className:"grid grid-cols-2 gap-y-2 gap-x-4",children:[Object(c.jsxs)("span",{children:[Object(c.jsx)(q.k,{size:24,className:"inline"}),Object(c.jsx)("span",{className:"align-middle",children:"Humidity"})]}),Object(c.jsxs)("span",{children:[t," %"]}),Object(c.jsxs)("span",{children:[Object(c.jsx)(q.a,{size:24,className:"inline"}),Object(c.jsx)("span",{className:"align-middle",children:"Pressure"})]}),Object(c.jsxs)("span",{children:[n," hPa"]}),Object(c.jsxs)("span",{children:[Object(c.jsx)(q.j,{size:24,className:"inline"}),Object(c.jsx)("span",{className:"align-middle",children:"Visibility"})]}),Object(c.jsxs)("span",{children:[s/1e3," km"]})]})]})},X=function(e){var t=e.speed,n=e.deg;return Object(c.jsxs)("div",{className:"flex space-x-2 items-center",children:[Object(c.jsx)(q.p,{size:32,className:"inline"}),Object(c.jsxs)("span",{className:"align-middle",children:["Wind ",t," m/s"]}),Object(c.jsx)(ee,{degree:n,size:24,className:"inline"})]})},ee=function(e){switch(Math.round(e.degree/45)%8){case 0:return Object(c.jsx)(q.g,Object(i.a)({},e));case 1:return Object(c.jsx)(q.i,Object(i.a)({},e));case 2:return Object(c.jsx)(q.f,Object(i.a)({},e));case 3:return Object(c.jsx)(q.d,Object(i.a)({},e));case 4:return Object(c.jsx)(q.b,Object(i.a)({},e));case 5:return Object(c.jsx)(q.c,Object(i.a)({},e));case 6:return Object(c.jsx)(q.e,Object(i.a)({},e));case 7:return Object(c.jsx)(q.h,Object(i.a)({},e));default:return null}},te=Object(s.memo)((function(){var e=Object(s.useState)(),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(s.useCallback)((function(){return function(){return G.apply(this,arguments)}().then(a)}),[a]);return Object(s.useEffect)((function(){r()}),[r]),n?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(ce,{refresh:r}),Object(c.jsx)(se,Object(i.a)({},n.main)),Object(c.jsx)(Z,{weather:n.weather[0]}),Object(c.jsx)(K,Object(i.a)({},n.sys)),Object(c.jsx)(X,Object(i.a)({},n.wind)),n.rain&&Object(c.jsx)(I,Object(i.a)(Object(i.a)({},n.rain),{},{type:"Rain"})),n.snow&&Object(c.jsx)(I,Object(i.a)(Object(i.a)({},n.snow),{},{type:"Snow"})),Object(c.jsx)(Q,Object(i.a)(Object(i.a)({},n.main),{},{visibility:n.visibility}))]}):null}));te.displayName="CurrentWeather";var ne=te,ce=function(e){var t=e.refresh;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("h2",{className:"w-full relative text-xl text-yellow-500 pb-2",children:["Current weather in R\xf8rvig",Object(c.jsx)("button",{className:"inline absolute top-1 right-0",onClick:t,children:Object(c.jsx)(N.a,{size:24})})]})})},se=function(e){var t=e.temp,n=e.feels_like;return Object(c.jsxs)("div",{className:"w-full flex justify-evenly",children:[Object(c.jsxs)("span",{children:["Now: ",Math.round(t)," \xb0C"]}),Object(c.jsxs)("span",{children:["Feels like: ",Math.round(n)," \xb0C"]})]})},ae=n(113);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var re="wss://paletten.oliverflecke.me:9001",ie=[{id:"C4402D",name:"Spisebord"},{id:"C431FB",name:"Sofa"},{id:"10DB9C",name:"Sovev\xe6relse"}],le={qos:1};var ue=function(){var e=Object(s.useState)(),t=Object(b.a)(e,2),n=t[0],a=t[1];return Object(s.useEffect)((function(){function e(){return(e=Object(j.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.connectAsync)(re,void 0,!1);case 3:t=e.sent,a(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0),a(null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),void 0===n?Object(c.jsx)("h2",{className:"text-black dark:text-white w-full text-center text-xl",children:"Connecting..."}):null===n?Object(c.jsx)("h2",{className:"text-black dark:text-white w-full text-center text-xl",children:"Failed to connect. Please contact website developer"}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(oe,{client:n}),Object(c.jsxs)("span",{className:"text-sm",children:["Version: ",ae.a]})]})},oe=function(e){var t=e.client,n=me(),a=Object(b.a)(n,2),r=a[0],u=a[1],d=me(),m=Object(b.a)(d,2),h=m[0],f=m[1],p=Object(s.useState)((function(){return ie.map((function(e){return new S(e.id,e.name,t)}))})),v=Object(b.a)(p,2),N=v[0],k=v[1];return Object(s.useEffect)((function(){function e(){return(e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:je(t,N.map((function(e){return e.id})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.on("message",(function(e,t){if(e.startsWith("temperature/"))switch(be(e)){case"inside":null===u||void 0===u||u.setTemperature(Number(t));break;case"outside":null===f||void 0===f||f.setTemperature(Number(t))}else if(e.startsWith("humidity/"))switch(be(e)){case"inside":u.setHumidity(Number(t));break;case"outside":f.setHumidity(Number(t))}if(e.startsWith("shellies")){var n=e.match(Object(l.a)(/\x2D([0-9A-Z_a-z]*)/,{id:1}));if(null===n||void 0===n?void 0:n.groups){var c="on"===t.toString()?g.On:g.Off,s=null===n||void 0===n?void 0:n.groups.id;k((function(e){return e.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{state:e.id===s?c:e.state})}))}))}}})),function(t){e.apply(this,arguments)}(t)}),[t]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(O,{}),Object(c.jsxs)("section",{className:"flex justify-between space-x-6 pb-4 max-w-lg w-full",children:[Object(c.jsx)(w,{name:"Inde",state:r}),Object(c.jsx)(w,{name:"Ude",state:h})]}),Object(c.jsx)("section",{className:"w-full flex flex-col justify-center align-middle",children:N.map((function(e){return Object(c.jsx)(C,{shelly:e},e.id)}))}),Object(c.jsx)(he,{}),Object(c.jsx)(y,{shellies:N}),Object(c.jsx)(he,{}),Object(c.jsx)(x,{client:t}),Object(c.jsx)(he,{}),Object(c.jsx)(ne,{}),Object(c.jsx)(he,{}),Object(c.jsx)(R,{client:t})]})};function je(e,t){t.forEach(function(){var t=Object(j.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.subscribe("shellies/shelly1-".concat(n,"/relay/0"),le);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),["inside","outside"].forEach(function(){var t=Object(j.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.subscribe("temperature/".concat(n),le);case 2:return t.next=4,e.subscribe("humidity/".concat(n),le);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}function be(e){var t=e.match(Object(l.a)(/\/([0-9A-Z_a-z]+)$/,{place:1}));return(null===t||void 0===t?void 0:t.groups)?null===t||void 0===t?void 0:t.groups.place:void 0}function de(e){switch(e){case g.Off:return"red";case g.On:return"green";default:return"grey"}}function me(){var e=Object(s.useState)(),t=Object(b.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(),r=Object(b.a)(a,2);return[{temperature:n,humidity:r[0]},{setTemperature:c,setHumidity:r[1]}]}var he=function(){return Object(c.jsx)("hr",{className:"w-full my-4"})},fe=document.getElementById("root"),Oe=Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(ue,{})});(null===fe||void 0===fe?void 0:fe.hasChildNodes())?Object(r.hydrate)(Oe,fe):Object(r.render)(Oe,fe),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[245,1,2]]]);
//# sourceMappingURL=main.2b3a4f4c.chunk.js.map